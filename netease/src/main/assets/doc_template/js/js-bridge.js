!function(){function l(d,e,f){if(d&&"string"==typeof d){b++;var g={name:d,_:Date.now()};"object"==typeof e&&"{}"!==JSON.stringify(e)&&(g.params=e),"function"==typeof f&&(g.callbackId=a+b,c[g.callbackId]={name:d,params:e,callback:f}),i||j||m(),n(g)}}function m(){try{"function"==typeof window.extra.postInvocation&&(i=!0)}catch(a){window.stamp&&window.stamp("UrlScheme used."),console.warn("UrlScheme used.")}i||(j=!0,k=document.createElement("iframe"),k.id="newsappJsBridgeIframe",k.style.display="none",document.body.appendChild(k))}function n(a){i?(window.stamp&&window.stamp("postMessage",a),window.extra.postInvocation(JSON.stringify(a))):o(a)}function o(a){f.length||setTimeout(v,0),f.push(a)}function p(a,b){s("transfer://"+a+"/"+(b||""))}function q(a,b){return a&&"string"==typeof a&&"function"==typeof b?(d[a]=b,function(){r(a)}):h}function r(a){a&&d[a]&&delete d[a]}function s(a){e.push(a),g||t()}function t(){var a=e.shift();a?(g=!0,k.src=a):g=!1}function u(){t()}function v(){var a=encodeURIComponent(JSON.stringify(f));return window.stamp&&window.stamp("fetch",f),f=[],window.disableJavaScriptInterface?(p("message",a),void 0):a}function w(a){var b,e,f,g;window.stamp&&window.stamp("handleMessageFromNative",a),a&&(b=a.responseId,e=a.callbackId,b?(f=c[b]||{},"string"==typeof b&&"function"==typeof f.callback&&(f.callback(a.result),delete c[b])):"string"==typeof a.name&&(g=d[a.name],g&&"function"==typeof g&&(e?g(a.params,function(a){n({responseId:e,result:a})}):g(a.params))))}var i,j,k,a="callback_",b=0,c={},d={},e=[],f=[],g=!1,h=function(){};window.handleConfirmFromNative=u,window.handleMessageFromNative=w,window.fetchMessage=v,window.newsappJsBridge={invoke:l,bind:q,unbind:r}}();